---
import services from '../data/services.json';

const tierOrder = ['PERSONAL', 'SIGNATURE', 'BUSINESS'];

const tierStyles = {
  PERSONAL: {
    section: 'bg-[#f4efe2] border-[#d8cdb8] text-[#4b3f32]',
    pill: 'bg-[#e6dcc8] text-[#5e4f3d]'
  },
  SIGNATURE: {
    section: 'bg-[#fffaf0] border-2 border-[#d4af37] text-[#513f1a] shadow-[0_0_0_1px_rgba(212,175,55,0.2)]',
    pill: 'bg-[#f4deb1] text-[#6a4d00]'
  },
  BUSINESS: {
    section: 'bg-slate-900 border-slate-700 text-slate-100',
    pill: 'bg-slate-700 text-slate-100'
  }
};

const groupedServices = tierOrder.map((tier) => ({
  tier,
  services: services.filter((service) => service.tier === tier)
}));
---

<section id="services" class="py-20 px-6 lg:px-10">
  <div class="mx-auto max-w-7xl">
    <div class="text-center mb-12">
      <p class="text-sm uppercase tracking-[0.2em] text-amber-700 font-semibold">Our Services</p>
      <h2 class="mt-3 text-3xl sm:text-4xl text-[#2d1810]">From personal celebrations to professional production</h2>
    </div>

    <div class="space-y-8">
      {groupedServices.map(({ tier, services }) => (
        <div class="rounded-3xl border p-6 md:p-8" class:list={[tierStyles[tier].section]}>
          <div class="mb-6 flex items-center justify-between gap-4">
            <h3 class="text-xl tracking-wide">{tier} Tier</h3>
            <span class={`rounded-full px-4 py-1 text-xs font-semibold uppercase tracking-wider ${tierStyles[tier].pill}`}>
              {services.length} Services
            </span>
          </div>

          <div class="grid grid-cols-1 gap-5 md:grid-cols-2 lg:grid-cols-3">
            {services.map((service) => (
              <article class="relative flex h-full flex-col rounded-2xl border border-black/10 bg-white/85 p-5 shadow-sm transition-transform duration-300 hover:-translate-y-1.5 hover:shadow-lg">
                {service.mostPopular && (
                  <span class="absolute right-4 top-4 rounded-full bg-amber-500 px-3 py-1 text-[10px] font-bold uppercase tracking-widest text-white">
                    Most Popular
                  </span>
                )}

                <div class="text-3xl" aria-hidden="true">{service.icon}</div>
                <h4 class="mt-3 text-xl text-[#2d1810]">{service.name}</h4>

                <div class="mt-2 flex items-end gap-2">
                  <span class="text-3xl font-bold text-[#2d1810]">${service.price.toFixed(2)}</span>
                </div>
                <p class="mt-1 text-xs text-[#6f6258]">Compare to competitors at $180-$300+</p>

                <p class="mt-4 text-sm text-[#4f4136]">{service.description}</p>
                <p class="mt-4 text-sm font-medium text-[#6a5849]">Delivery: {service.deliveryTime}</p>

                <a
                  href={`/order?service=${encodeURIComponent(service.name)}`}
                  class="mt-5 inline-flex w-fit items-center justify-center rounded-full bg-[#2d1810] px-4 py-2 text-sm font-semibold text-white transition-colors hover:bg-[#4a2a1d]"
                >
                  Get Started
                </a>
              </article>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
