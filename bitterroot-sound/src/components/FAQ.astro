---
import faqItems from '../data/faq.json';
---

<section id="faq" class="bg-[#fffaf0] px-6 py-20 lg:px-10">
  <div class="mx-auto max-w-4xl">
    <div class="mx-auto max-w-3xl text-center">
      <p class="text-sm font-semibold uppercase tracking-[0.2em] text-amber-700">FAQ</p>
      <h2 class="mt-3 text-3xl text-[#2d1810] sm:text-4xl">Frequently Asked Questions</h2>
      <p class="mt-4 text-base text-[#5b4c3f] sm:text-lg">Answers to the most common questions before you place your order.</p>
    </div>

    <div class="mt-12 space-y-4">
      {faqItems.map((item, index) => (
        <article class="rounded-2xl border border-[#e6dac5] bg-[#fdf6e6] shadow-sm">
          <button
            class="faq-trigger flex w-full items-center justify-between gap-4 px-5 py-4 text-left text-base font-semibold text-[#2d1810] sm:px-6 sm:py-5 sm:text-lg"
            type="button"
            aria-expanded="false"
            aria-controls={`faq-panel-${index}`}
            id={`faq-trigger-${index}`}
          >
            <span>{item.question}</span>
            <span class="text-2xl leading-none text-[#7a5b20]" aria-hidden="true">+</span>
          </button>

          <div
            id={`faq-panel-${index}`}
            role="region"
            aria-labelledby={`faq-trigger-${index}`}
            class="hidden border-t border-[#eadfce] px-5 py-4 text-[#4d3b2f] sm:px-6"
          >
            <p>{item.answer}</p>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<script is:inline>
  const faqTriggers = document.querySelectorAll('.faq-trigger');

  faqTriggers.forEach((trigger) => {
    trigger.addEventListener('click', () => {
      const panelId = trigger.getAttribute('aria-controls');
      if (!panelId) return;

      const panel = document.getElementById(panelId);
      if (!panel) return;

      const expanded = trigger.getAttribute('aria-expanded') === 'true';
      trigger.setAttribute('aria-expanded', String(!expanded));
      panel.classList.toggle('hidden', expanded);

      const icon = trigger.querySelector('span:last-child');
      if (icon) icon.textContent = expanded ? '+' : 'âˆ’';
    });
  });
</script>
